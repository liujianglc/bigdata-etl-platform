# ğŸš€ å¤§æ•°æ®å¹³å°è„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“‹ è„šæœ¬æ¦‚è§ˆ

| è„šæœ¬åç§° | ç”¨é€” | æ¨èåœºæ™¯ |
|---------|------|----------|
| `quick-start.sh` | ä¸€é”®å¿«é€Ÿå¯åŠ¨ | æ–°æ‰‹ç”¨æˆ·ï¼Œå¿«é€Ÿä½“éªŒ |
| `deploy.sh` | å®Œæ•´éƒ¨ç½²è„šæœ¬ | ç”Ÿäº§ç¯å¢ƒï¼Œå®Œæ•´åŠŸèƒ½ |
| `build-airflow-image.sh` | æ„å»ºè‡ªå®šä¹‰é•œåƒ | éœ€è¦è‡ªå®šä¹‰ä¾èµ– |
| `test-build.sh` | æµ‹è¯•æ„å»ºç¯å¢ƒ | æ„å»ºå¤±è´¥æ—¶è¯Šæ–­ |
| `check-status.sh` | çŠ¶æ€æ£€æŸ¥ | è¿è¡Œæ—¶ç›‘æ§ |
| `cleanup.sh` | æ¸…ç†è„šæœ¬ | ç»´æŠ¤å’Œé‡ç½® |
| `quick-deploy.sh` | åŸå§‹éƒ¨ç½²è„šæœ¬ | å…¼å®¹æ€§ä¿æŒ |

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æ–°æ‰‹å¿«é€Ÿä½“éªŒ
```bash
# æœ€ç®€å•çš„æ–¹å¼ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹æ¡ˆ
./quick-start.sh
```
**ç‰¹ç‚¹**: 
- è‡ªåŠ¨å¤„ç†æ„å»ºå¤±è´¥
- æä¾›å¤šç§å¯åŠ¨é€‰é¡¹
- åŒ…å«çŠ¶æ€éªŒè¯

### åœºæ™¯2: å¼€å‘ç¯å¢ƒéƒ¨ç½²
```bash
# å®Œæ•´çš„å¼€å‘ç¯å¢ƒ
./deploy.sh --mode dev
```
**ç‰¹ç‚¹**:
- åŒ…å«çƒ­é‡è½½
- æš´éœ²è°ƒè¯•ç«¯å£
- è¯¦ç»†çš„é”™è¯¯å¤„ç†

### åœºæ™¯3: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# æ„å»ºä¼˜åŒ–é•œåƒ
./build-airflow-image.sh

# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
./deploy.sh --mode prod
```
**ç‰¹ç‚¹**:
- èµ„æºé™åˆ¶
- è‡ªåŠ¨é‡å¯ç­–ç•¥
- å®‰å…¨é…ç½®

### åœºæ™¯4: ä»…åŸºç¡€æœåŠ¡
```bash
# åªå¯åŠ¨Airflowå’Œæ•°æ®åº“
./quick-start.sh  # é€‰æ‹©é€‰é¡¹3
```
**ç‰¹ç‚¹**:
- èµ„æºå ç”¨å°‘
- å¯åŠ¨é€Ÿåº¦å¿«
- é€‚åˆæµ‹è¯•

### åœºæ™¯5: æ•…éšœæ’é™¤
```bash
# è¯Šæ–­æ„å»ºé—®é¢˜
./test-build.sh

# æ£€æŸ¥è¿è¡ŒçŠ¶æ€
./check-status.sh

# æ¸…ç†é‡ç½®
./cleanup.sh
```

## ğŸ”§ Docker Compose é…ç½®æ–‡ä»¶

| æ–‡ä»¶åç§° | ç”¨é€” |
|---------|------|
| `docker-compose.yml` | ä¸»é…ç½®æ–‡ä»¶ |
| `docker-compose.override.yml` | å¼€å‘ç¯å¢ƒè¦†ç›– |
| `docker-compose.prod.yml` | ç”Ÿäº§ç¯å¢ƒé…ç½® |
| `docker-compose.fallback.yml` | åŸå§‹é•œåƒåå¤‡æ–¹æ¡ˆ |

### ç»„åˆä½¿ç”¨ç¤ºä¾‹

```bash
# å¼€å‘ç¯å¢ƒ (è‡ªåŠ¨åŠ è½½override)
docker-compose up -d

# ç”Ÿäº§ç¯å¢ƒ
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

# ä½¿ç”¨åŸå§‹é•œåƒ
docker-compose -f docker-compose.yml -f docker-compose.fallback.yml up -d
```

## ğŸ³ Dockerfile é€‰é¡¹

| æ–‡ä»¶åç§° | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|
| `Dockerfile.airflow` | å®Œæ•´ç‰ˆæœ¬ï¼ŒåŒ…å«æ‰€æœ‰ä¾èµ– | åŠŸèƒ½å®Œæ•´çš„ç”Ÿäº§ç¯å¢ƒ |
| `Dockerfile.airflow.simple` | ç®€åŒ–ç‰ˆæœ¬ï¼Œæ ¸å¿ƒä¾èµ– | å¿«é€Ÿæ„å»ºï¼ŒåŸºç¡€åŠŸèƒ½ |
| åŠ¨æ€ç”Ÿæˆçš„minimalç‰ˆæœ¬ | æœ€å°ç‰ˆæœ¬ï¼Œä»…MySQLæ”¯æŒ | æ„å»ºå¤±è´¥æ—¶çš„åå¤‡ |

## ğŸš¨ æ•…éšœå¤„ç†æµç¨‹

### 1. æ„å»ºå¤±è´¥
```bash
# æ­¥éª¤1: è¯Šæ–­ç¯å¢ƒ
./test-build.sh

# æ­¥éª¤2: å°è¯•ä¸åŒæ„å»ºç­–ç•¥
./build-airflow-image.sh

# æ­¥éª¤3: ä½¿ç”¨åå¤‡æ–¹æ¡ˆ
./quick-start.sh  # é€‰æ‹©é€‰é¡¹1
```

### 2. å¯åŠ¨å¤±è´¥
```bash
# æ­¥éª¤1: æ£€æŸ¥çŠ¶æ€
./check-status.sh

# æ­¥éª¤2: æŸ¥çœ‹æ—¥å¿—
docker-compose logs airflow-webserver

# æ­¥éª¤3: é‡å¯æœåŠ¡
docker-compose restart airflow-webserver
```

### 3. æ€§èƒ½é—®é¢˜
```bash
# æ­¥éª¤1: æ£€æŸ¥èµ„æºä½¿ç”¨
docker stats

# æ­¥éª¤2: å¯åŠ¨åŸºç¡€æœåŠ¡
./quick-start.sh  # é€‰æ‹©é€‰é¡¹3

# æ­¥éª¤3: è°ƒæ•´é…ç½®
# ç¼–è¾‘ .env æ–‡ä»¶å‡å°‘èµ„æºåˆ†é…
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æ—¥å¸¸æ£€æŸ¥
```bash
# å¿«é€ŸçŠ¶æ€æ£€æŸ¥
./check-status.sh

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats --no-stream
```

### æ—¥å¿—ç®¡ç†
```bash
# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f airflow-webserver

# æ¸…ç†æ—¥å¿—
./cleanup.sh  # é€‰æ‹©é€‰é¡¹5
```

### å®šæœŸç»´æŠ¤
```bash
# æ¯å‘¨æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
docker system prune -f

# æ¯æœˆå®Œå…¨é‡å»º
./cleanup.sh  # é€‰æ‹©é€‰é¡¹4
./deploy.sh --mode prod
```

## ğŸ›ï¸ ç¯å¢ƒå˜é‡é…ç½®

å…³é”®é…ç½®é¡¹ (åœ¨ `.env` æ–‡ä»¶ä¸­):

```bash
# ç«¯å£é…ç½® (é¿å…å†²çª)
AIRFLOW_WEBSERVER_PORT=8080
SPARK_UI_PORT=8081
HDFS_UI_PORT=9870

# èµ„æºé…ç½® (æ ¹æ®ç³»ç»Ÿè°ƒæ•´)
SPARK_WORKER_MEMORY=2g
SPARK_WORKER_CORES=2

# å®‰å…¨é…ç½® (ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹)
POSTGRES_PASSWORD=your-secure-password
MYSQL_ROOT_PASSWORD=your-secure-password
AIRFLOW__CORE__FERNET_KEY=your-fernet-key
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **é¦–æ¬¡ä½¿ç”¨**: ä½¿ç”¨ `./quick-start.sh` å¿«é€Ÿä½“éªŒ
2. **å¼€å‘ç¯å¢ƒ**: ä½¿ç”¨ `./deploy.sh --mode dev` è·å¾—å®Œæ•´åŠŸèƒ½
3. **ç”Ÿäº§ç¯å¢ƒ**: å…ˆæ„å»ºé•œåƒï¼Œå†ä½¿ç”¨ç”Ÿäº§é…ç½®éƒ¨ç½²
4. **æ•…éšœæ’é™¤**: æŒ‰ç…§æ•…éšœå¤„ç†æµç¨‹é€æ­¥è¯Šæ–­
5. **å®šæœŸç»´æŠ¤**: ä½¿ç”¨æ¸…ç†è„šæœ¬ä¿æŒç³»ç»Ÿæ•´æ´

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ `DEPLOYMENT_GUIDE.md` è·å–è¯¦ç»†è¯´æ˜
2. è¿è¡Œ `./check-status.sh` æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
3. ä½¿ç”¨ `./test-build.sh` è¯Šæ–­æ„å»ºé—®é¢˜
4. æŸ¥çœ‹å®¹å™¨æ—¥å¿—: `docker-compose logs [service-name]`

---

**æç¤º**: æ‰€æœ‰è„šæœ¬éƒ½åŒ…å« `--help` é€‰é¡¹ï¼Œå¯ä»¥æŸ¥çœ‹è¯¦ç»†ç”¨æ³•è¯´æ˜ã€‚